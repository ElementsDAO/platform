(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{42926:function(n,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/projects/new",function(){return r(94755)}])},94755:function(n,t,r){"use strict";r.r(t),r.d(t,{default:function(){return P}});var e=r(34051),o=r.n(e),a=r(85893),i=r(67294),u=r(3283),c=r.n(u),l=r(77044),s=r(27948),f=r(15861),p=r(14400),d=r(11163),h=r(99226),v=r(49576),m=r(98456),y=r(37543);function b(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function g(n,t,r,e,o,a,i){try{var u=n[a](i),c=u.value}catch(l){return void r(l)}u.done?t(c):Promise.resolve(c).then(e,o)}function x(n){return function(){var t=this,r=arguments;return new Promise((function(e,o){var a=n.apply(t,r);function i(n){g(a,e,o,i,u,"next",n)}function u(n){g(a,e,o,i,u,"throw",n)}i(void 0)}))}}function w(n,t,r){return t in n?Object.defineProperty(n,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):n[t]=r,n}function j(n){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},e=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(e=e.concat(Object.getOwnPropertySymbols(r).filter((function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable})))),e.forEach((function(t){w(n,t,r[t])}))}return n}function S(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,a=[],i=!0,u=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(a.push(e.value),!t||a.length!==t);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return b(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return b(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var A=function(n){var t=n.contract,r=(0,l.Ge)().account,e=(0,d.useRouter)(),u=(0,p.Ue)({url:"https://ipfs.infura.io:5001/api/v0"}),c=S(i.useState(!1),2),b=c[0],g=c[1],w=S(i.useState(""),2),A=(w[0],w[1]),k=S(i.useState(null),2),O=k[0],Z=k[1],C=S(i.useState({price:"",name:"",description:""}),2),_=C[0],E=C[1],P=function(){var n=x(o().mark((function n(t){var r,e,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=t.target.files[0],n.prev=1,n.next=4,u.add(r,{progress:function(n){return console.log("received: ".concat(n))}});case 4:e=n.sent,a="https://ipfs.infura.io/ipfs/".concat(e.path),Z(a),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(1),console.log("Error uploading file: ",n.t0);case 12:case"end":return n.stop()}}),n,null,[[1,9]])})));return function(t){return n.apply(this,arguments)}}(),N=function(){var n=x(o().mark((function n(){var a,i,c,l,s,f;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return A("create Application..."),g(!0),a=_.name,i=_.description,c=_.price,l=JSON.stringify({name:a,description:i,image:O}),n.prev=4,n.next=7,u.add(l);case 7:return s=n.sent,f="https://ipfs.infura.io/ipfs/".concat(s.path),n.next=11,t.methods.createApplication(c,f).send({from:r});case 11:n.sent,e.push("/"),g(!1),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(4),console.log("Error uploading file: ",n.t0);case 19:case"end":return n.stop()}}),n,null,[[4,16]])})));return function(){return n.apply(this,arguments)}}();return(0,a.jsx)(s.Z,{maxWidth:"sm",children:(0,a.jsxs)(h.Z,{component:"form",children:[(0,a.jsx)(v.Z,{disabled:b,placeholder:"Name",fullWidth:!0,variant:"outlined",sx:{mb:2,bgcolor:"background.paper"},value:_.name,onChange:function(n){return E(j({},_,{name:n.target.value}))}}),(0,a.jsx)(v.Z,{disabled:b,placeholder:"Description",fullWidth:!0,variant:"outlined",sx:{mb:2,bgcolor:"background.paper"},value:_.description,onChange:function(n){return E(j({},_,{description:n.target.value}))}}),(0,a.jsx)(v.Z,{disabled:b,type:"number",placeholder:"Price in USD",fullWidth:!0,variant:"outlined",value:_.price,sx:{mb:2,bgcolor:"background.paper"},onChange:function(n){return E(j({},_,{price:n.target.value}))}}),(0,a.jsx)(v.Z,{disabled:b,type:"file",name:"Asset",fullWidth:!0,sx:{mb:2,bgcolor:"background.paper"},onChange:P}),O&&(0,a.jsx)("img",{className:"rounded mt-4",alt:"upload",width:"350",src:O}),(0,a.jsxs)(h.Z,{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",children:[b&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(m.Z,{color:"primary",size:"5em"}),(0,a.jsx)(f.Z,{variant:"body1",align:"center",children:"Loading..."})]}),(0,a.jsx)(y.Z,{disabled:b,variant:"contained",onClick:N,children:"Create Application"})]})]})})},k=r(5806),O=r(22729);function Z(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function C(n,t,r,e,o,a,i){try{var u=n[a](i),c=u.value}catch(l){return void r(l)}u.done?t(c):Promise.resolve(c).then(e,o)}function _(n,t){return function(n){if(Array.isArray(n))return n}(n)||function(n,t){var r=null==n?null:"undefined"!==typeof Symbol&&n[Symbol.iterator]||n["@@iterator"];if(null!=r){var e,o,a=[],i=!0,u=!1;try{for(r=r.call(n);!(i=(e=r.next()).done)&&(a.push(e.value),!t||a.length!==t);i=!0);}catch(c){u=!0,o=c}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}(n,t)||function(n,t){if(!n)return;if("string"===typeof n)return Z(n,t);var r=Object.prototype.toString.call(n).slice(8,-1);"Object"===r&&n.constructor&&(r=n.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Z(n,t)}(n,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var E=r(18111),P=function(){var n=(0,l.Ge)(),t=n.account,r=n.library,e=_(i.useState(void 0),2),u=e[0],p=e[1],d=function(){var n,t=(n=o().mark((function n(t,r){var e,a;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e=new(c())(r.provider),a=new e.eth.Contract(E,O.Z.contracts.elements),p(a);case 3:case"end":return n.stop()}}),n)})),function(){var t=this,r=arguments;return new Promise((function(e,o){var a=n.apply(t,r);function i(n){C(a,e,o,i,u,"next",n)}function u(n){C(a,e,o,i,u,"throw",n)}i(void 0)}))});return function(n,r){return t.apply(this,arguments)}}();return i.useEffect((function(){return t&&r&&d(t,r),null}),[t,r]),(0,a.jsxs)(k.Z,{children:[(0,a.jsx)(s.Z,{maxWidth:"sm",children:(0,a.jsx)(f.Z,{gutterBottom:!0,fontWeight:"bold",variant:"h2",children:"New"})}),(0,a.jsx)(A,{contract:u})]})}},42611:function(){},88795:function(){}},function(n){n.O(0,[364,589,487,806,774,888,179],(function(){return t=42926,n(n.s=t);var t}));var t=n.O();_N_E=t}]);