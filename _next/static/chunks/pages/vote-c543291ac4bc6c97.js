(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[786],{27948:function(t,e,n){"use strict";n.d(e,{Z:function(){return v}});var r=n(63366),i=n(87462),a=n(67294),o=n(86010),s=n(70005),u=n(27623),p=n(11496),c=n(36594);function l(t){return(0,c.Z)("MuiContainer",t)}(0,n(38959).Z)("MuiContainer",["root","disableGutters","fixed","maxWidthXs","maxWidthSm","maxWidthMd","maxWidthLg","maxWidthXl"]);var d=n(98216),y=n(85893);const m=["className","component","disableGutters","fixed","maxWidth"],f=(0,p.ZP)("div",{name:"MuiContainer",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[`maxWidth${(0,d.Z)(String(n.maxWidth))}`],n.fixed&&e.fixed,n.disableGutters&&e.disableGutters]}})((({theme:t,ownerState:e})=>(0,i.Z)({width:"100%",marginLeft:"auto",boxSizing:"border-box",marginRight:"auto",display:"block"},!e.disableGutters&&{paddingLeft:t.spacing(2),paddingRight:t.spacing(2),[t.breakpoints.up("sm")]:{paddingLeft:t.spacing(3),paddingRight:t.spacing(3)}})),(({theme:t,ownerState:e})=>e.fixed&&Object.keys(t.breakpoints.values).reduce(((e,n)=>{const r=t.breakpoints.values[n];return 0!==r&&(e[t.breakpoints.up(n)]={maxWidth:`${r}${t.breakpoints.unit}`}),e}),{})),(({theme:t,ownerState:e})=>(0,i.Z)({},"xs"===e.maxWidth&&{[t.breakpoints.up("xs")]:{maxWidth:Math.max(t.breakpoints.values.xs,444)}},e.maxWidth&&"xs"!==e.maxWidth&&{[t.breakpoints.up(e.maxWidth)]:{maxWidth:`${t.breakpoints.values[e.maxWidth]}${t.breakpoints.unit}`}})));var v=a.forwardRef((function(t,e){const n=(0,u.Z)({props:t,name:"MuiContainer"}),{className:a,component:p="div",disableGutters:c=!1,fixed:v=!1,maxWidth:h="lg"}=n,b=(0,r.Z)(n,m),x=(0,i.Z)({},n,{component:p,disableGutters:c,fixed:v,maxWidth:h}),g=(t=>{const{classes:e,fixed:n,disableGutters:r,maxWidth:i}=t,a={root:["root",i&&`maxWidth${(0,d.Z)(String(i))}`,n&&"fixed",r&&"disableGutters"]};return(0,s.Z)(a,l,e)})(x);return(0,y.jsx)(f,(0,i.Z)({as:p,ownerState:x,className:(0,o.default)(g.root,a),ref:e},b))}))},90333:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/vote",function(){return n(18069)}])},18069:function(t,e,n){"use strict";n.r(e);var r=n(34051),i=n.n(r),a=n(85893),o=n(67294),s=n(9008),u=n.n(s),p=n(3283),c=n.n(p),l=n(11163),d=n(27948),y=n(15861),m=n(99226),f=n(50582),v=n(41532),h=n(38945),b=n(17659),x=n(22729);function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(p){return void n(p)}s.done?e(u):Promise.resolve(u).then(r,i)}function T(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var S=b.P.useAccounts,Z=(b.P.useError,b.P.useIsActivating,b.P.useIsActive),M=(b.P.useENSNames,h.P.useProvider),j=h.P.useChainId,k=n(3176);e.default=function(){(0,l.useRouter)(),(0,l.useRouter)().query;var t=T(o.useState(void 0),2),e=t[0],n=t[1],r=T(o.useState(!1),2),s=(r[0],r[1],T(o.useState(0),2)),p=s[0],b=(s[1],T(o.useState(void 0),2)),g=(b[0],b[1],T(o.useState(""),2)),P=(g[0],g[1],j()),W=Z(),_=h.P.useIsActive(),A=M(),E=S(),I=T(o.useState(void 0),2),C=I[0],N=I[1],O=function(){var t,e=(t=i().mark((function t(){var e,r,a;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("provider",A),console.log("account:",E[0]),N(E[0]),e=new(c())(A.connection.url),console.log("web3",e),r=new e.eth.Contract(k,x.Z.contracts.gov),n(r),t.prev=7,t.next=10,r.methods.walletOfOwner(C).call();case 10:a=t.sent,console.log("data",a),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(7),console.log("err",t.t0);case 17:case"end":return t.stop()}}),t,null,[[7,14]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){w(a,r,i,o,s,"next",t)}function s(t){w(a,r,i,o,s,"throw",t)}o(void 0)}))});return function(){return e.apply(this,arguments)}}();return o.useEffect((function(){W&&_&&P&&O()}),[W,P]),(0,a.jsxs)(v.Z,{children:[(0,a.jsx)(u(),{children:(0,a.jsx)("title",{children:"Vote"})}),(0,a.jsxs)(d.Z,{maxWidth:"sm",children:[(0,a.jsx)(y.Z,{variant:"h2",fontWeight:"bold",children:"Vote"}),(0,a.jsx)(y.Z,{mb:3,color:"text.secondary",children:"Liquid Democracy Voting with Element NFTs."}),(0,a.jsxs)(m.Z,{children:[(0,a.jsx)(y.Z,{variant:"h6",color:"text.primary",children:"Proposals"}),(0,a.jsx)(f.Z,{contract:e,count:p})]})]})]})}},50582:function(t,e,n){"use strict";n.d(e,{Z:function(){return M}});var r=n(34051),i=n.n(r),a=n(85893),o=n(67294),s=n(3283),u=n.n(s),p=n(99226),c=n(78462),l=n(70891),d=n(18987),y=n(69661),m=n(79953),f=n(15861),v=n(83321),h=n(77985);function b(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(p){return void n(p)}s.done?e(u):Promise.resolve(u).then(r,i)}var x=function(t){var e=t.contract,n=t.proposal,r=(0,h.useWeb3React)().account,o=function(){var t,n=(t=i().mark((function t(n){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.methods.vote(n).send({from:r});case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.log("Error uploading file: ",t.t0);case 8:case"end":return t.stop()}}),t,null,[[0,5]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){b(a,r,i,o,s,"next",t)}function s(t){b(a,r,i,o,s,"throw",t)}o(void 0)}))});return function(t){return n.apply(this,arguments)}}();return(0,a.jsxs)(l.ZP,{alignItems:"flex-start",children:[(0,a.jsx)(d.Z,{children:(0,a.jsx)(y.Z,{alt:"Remy Sharp",src:"/static/images/avatar/1.jpg"})}),(0,a.jsx)(m.Z,{primary:n.description,secondary:(0,a.jsx)(f.Z,{sx:{display:"inline"},variant:"body2",color:"text.primary",children:n.numVotes})}),(0,a.jsx)(v.Z,{onClick:function(){return o(n.id)},children:"Vote"})]})};function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function w(t,e,n,r,i,a,o){try{var s=t[a](o),u=s.value}catch(p){return void n(p)}s.done?e(u):Promise.resolve(u).then(r,i)}function T(t){return function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(t){w(a,r,i,o,s,"next",t)}function s(t){w(a,r,i,o,s,"throw",t)}o(void 0)}))}}function S(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(t);!(o=(r=n.next()).done)&&(a.push(r.value),!e||a.length!==e);o=!0);}catch(u){s=!0,i=u}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=n(63466),M=function(t){var e=t.contract,n=t.count,r=S(o.useState([]),2),s=r[0],l=r[1];(function(){var t=T(i().mark((function t(r,a){var o,s,p,c,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=[],t.prev=2,p=0;case 4:if(!(p<n)){t.next=14;break}return t.next=7,e.methods.proposals(p).call();case 7:o=t.sent,console.log("proposal",o),c={description:o.description,numVotes:o.numVotes,id:p},s.push(c);case 11:p+=1,t.next=4;break;case 14:console.log("proposals",o),l(s),d=new(u())(a.provider),new d.eth.Contract(Z,o),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(2),console.log("error",t.t0);case 23:case"end":return t.stop()}}),t,null,[[2,20]])})))})(),function(){var t=T(i().mark((function t(){return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("TODO: Add metamask provider");case 1:case"end":return t.stop()}}),t)})))}();return(0,a.jsxs)(p.Z,{children:[(0,a.jsxs)("p",{children:["Entries: ",n]}),(0,a.jsx)(c.Z,{sx:{width:"100%",bgcolor:"background.paper"},children:s.map((function(t,n){return(0,a.jsx)(x,{contract:e,proposal:t})}))})]})}},63466:function(t){"use strict";t.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"_creator","type":"address"},{"internalType":"uint256","name":"_amount","type":"uint256"},{"internalType":"uint256","name":"_timeStart","type":"uint256"},{"internalType":"uint256","name":"_timeEnd","type":"uint256"},{"internalType":"address","name":"_usdtAddress","type":"address"},{"internalType":"address","name":"_elements","type":"address"},{"internalType":"string","name":"_baseURI","type":"string"}],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[],"name":"amount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"balance","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"creator","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"elements","outputs":[{"internalType":"contract Elements","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"_amount","type":"uint256"}],"name":"invest","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"investors","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"invests","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"timeEnd","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"timeStart","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalInvestors","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"usdt","outputs":[{"internalType":"contract IERC20","name":"","type":"address"}],"stateMutability":"view","type":"function"}]')},3176:function(t){"use strict";t.exports=JSON.parse('[{"inputs":[{"internalType":"address","name":"voter","type":"address"}],"name":"addVoter","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"delegate","type":"address"}],"name":"delegateTo","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"getProposal","outputs":[{"internalType":"string","name":"","type":"string"},{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getProposalCount","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"description","type":"string"}],"name":"newProposal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"","type":"uint256"}],"name":"proposals","outputs":[{"internalType":"string","name":"description","type":"string"},{"internalType":"uint256","name":"numVotes","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"proposal","type":"uint256"}],"name":"vote","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"voters","outputs":[{"internalType":"uint256","name":"vote","type":"uint256"},{"internalType":"uint256","name":"delegatedTo","type":"uint256"},{"internalType":"uint256","name":"index","type":"uint256"},{"internalType":"enum LiquidDemocracy.State","name":"state","type":"uint8"}],"stateMutability":"view","type":"function"}]')}},function(t){t.O(0,[838,688,532,774,888,179],(function(){return e=90333,t(t.s=e);var e}));var e=t.O();_N_E=e}]);